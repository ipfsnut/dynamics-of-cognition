#!/bin/sh
# Pre-commit hook to prevent accidental commit of build artifacts

# Check for build artifacts that should not be committed
artifacts="src/assets/paper.md src/data/vault-manifest.json public/h-omega-synthesis.md public/thermodynamic-grounding.md public/configuration-dynamics.md"

for file in $artifacts; do
    if git diff --cached --name-only | grep -q "^$file$"; then
        echo "âŒ ERROR: Attempting to commit build artifact: $file"
        echo "ğŸ”§ These files are generated by './scripts/fetch-vault.sh' and should not be committed."
        echo "ğŸ’¡ Run 'git reset HEAD $file' to unstage."
        exit 1
    fi
done

echo "âœ… No build artifacts detected in commit."
exit 0